#periodics:
#- interval: 10m
#  name: echo-test
#  decorate: true
#  spec:
#    containers:
#    - image: alpine
#      command: ["/bin/date"]

postsubmits:
  belitradas/test-infra:
    - name: test-config-postsubmit
      decorate: true
      max_concurrency: 1 
      run_if_changed: '^(config/.*|prow/.*)$'
      branches:
        - master
      extra_refs:
        - base_ref: master
          org: kubernetes
          repo: test-infra
      spec:
        containers:
          - command:
              - ./prow/scripts/validate-config.sh
            image: launcher.gcr.io/google/bazel:0.24.1
            name: "test-config"
            resources: {}
            env:
              - name: K8S_TEST_INFRA_PATH
                value: "/home/prow/go/src/github.com/kubernetes/test-infra"
              - name: BELITRADAS_TEST_INFRA_PATH
                value: "/home/prow/go/src/github.com/belitradas/test-infra"
    - name: test-prow-manifests-postsubmit
      decorate: true 
      max_concurrency: 1 
      run_if_changed: 'prow/manifests/'
      branches:
        - master
      spec: 
        serviceAccountName: prow
        containers:
          - name: "test-manifests"
            command:
              - make
            args:
              - deploy-prow
            image: belitre/kubectl:1.14.2